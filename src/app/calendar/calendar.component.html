<div class="calendar" id="calendar">

  <!-- <button nz-button [nzType]="'primary'" (click)="showModal()"><span>Show Modal</span></button> -->

  <div class="calendar-dates">

      <div id="calendarDays" class="days">
      </div>

      <div id="currentYear">
        Year: {{ currentYear }}
        <button nz-button [nzType]="'primary'" (click)="[showModal('SET_AVAILABILITY_YEAR'), setDateRange('YEAR', 1, monthFirstDayIndex(0, currentYear), 0, currentYear)]">Set Availability For Year</button>
      </div>

      <hr>

      <div id="daysInMonths">
        <div *ngFor="let month of months; let monthIndex = index">
          <br>
          Month: {{ month }}
          <br>
          <button nz-button [nzType]="'primary'" (click)="[showModal('SET_AVAILABILITY_MONTH'), setDateRange('MONTH', 1, monthFirstDayIndex(monthIndex, currentYear), monthIndex, currentYear)]">Set Availability For Month</button>
          <table>
            <tr>
              <th>+</th>
              <th *ngFor="let day of days">{{ day }}</th>
            </tr>
            <tr *ngFor="let week of maxWeeksInMonths">
              <td>
                <button (click)="[showModal('SET_AVAILABILITY_WEEK'), setDateRange('WEEK', week, getFirstDayOfWeekIndex(week, monthIndex, currentYear), monthIndex, currentYear)]">Set Availability For Week</button>
                <button nz-button (click)="[showModal('ADD_TASK_WEEK'), setDateRange('WEEK', week, getFirstDayOfWeekIndex(week, monthIndex, currentYear), monthIndex, currentYear)]">+ Add Task Week</button>
              </td>
              <td *ngFor="let day of days; let dayIndex = index">
                <div>
                  <p>
                    Date: {{ getCalendarDay(week, dayIndex, monthIndex, currentYear) }}
                  </p>
                </div>
                <button (click)="[showModal('SET_AVAILABILITY_DAY'), setDateRange('DAY', week, dayIndex, monthIndex, currentYear)]">Set Availability</button>
                <button nz-button (click)="[showModal('ADD_TASK_DAY'), setDateRange('DAY', week, dayIndex, monthIndex, currentYear)]">+ Add Task</button>
              </td>
            </tr>
          </table>

        </div>
      </div>

  </div>
</div>


<nz-modal [(nzVisible)]="isVisible" [nzTitle]="modalTitle" (nzOnCancel)="handleCancel()" (nzOnOk)="handleOk()">
  <h4>{{ modalDateRange }}</h4>

  <div *ngIf="modalType === 'SET_AVAILABILITY_YEAR'">
    SET_AVAILABILITY_YEAR
  </div>

  <div *ngIf="modalType === 'SET_AVAILABILITY_MONTH'">
    SET_AVAILABILITY_MONTH
  </div>

  <div *ngIf="modalType === 'SET_AVAILABILITY_WEEK'">
    SET_AVAILABILITY_WEEK
  </div>

  <div *ngIf="modalType === 'SET_AVAILABILITY_DAY'">
    <!-- SET_AVAILABILITY_DAY -->
    <form nz-form [formGroup]="validateForm" (ngSubmit)="submitForm()">

      <nz-form-item>
        <nz-form-label [nzSm]="8" [nzXs]="24" nzRequired>Start</nz-form-label>
        <nz-form-control [nzSm]="16" [nzXs]="24">
          <nz-time-picker
            [nzUse12Hours]="true"
            nzFormat="h:mm a"
            formControlName="timePicker"></nz-time-picker>
        </nz-form-control>
      </nz-form-item>
      <nz-form-item>
        <nz-form-label [nzSm]="8" [nzXs]="24" nzRequired>End</nz-form-label>
        <nz-form-control [nzSm]="16" [nzXs]="24">
          <nz-time-picker
            [nzUse12Hours]="true"
            nzFormat="h:mm a"
            formControlName="timePicker"></nz-time-picker>
        </nz-form-control>
      </nz-form-item>

      <!-- <nz-form-item>
        <nz-form-control [nzXs]="{ span: 24, offset: 0 }" [nzSm]="{ span: 16, offset: 8 }">
          <button nz-button nzType="primary">Submit</button>
        </nz-form-control>
      </nz-form-item> -->
    </form>
  </div>

  <div *ngIf="modalType === 'ADD_TASK_WEEK'">
    ADD_TASK_WEEK
  </div>

  <div *ngIf="modalType === 'ADD_TASK_DAY'">
    ADD_TASK_DAY
  </div>
</nz-modal>
